<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Signup â€¢ CrowdSolve</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body{font-family:Arial, sans-serif;background:#f6f7f9;padding:30px;}
        .card{max-width:420px;margin:50px auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 5px 20px rgba(0,0,0,0.1);}
        input,select,button{width:100%;padding:10px;margin:10px 0;border:1px solid #ddd;border-radius:8px;}
        button{background:#16a34a;color:#fff;border:none;cursor:pointer;}
        button:hover{opacity:.9;}
        .msg{margin-top:10px;font-size:14px;}
        a{color:#2563eb;text-decoration:none;}
    </style>
</head>
<body>
<div class="card">
    <h2>Create Account</h2>
    <form id="signupForm">
        <input type="text" id="name" placeholder="Full name" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <select id="role">
            <option value="CITIZEN">Citizen</option>
            <option value="AUTHORITY">Authority</option>
            <option value="ADMIN">Admin</option>
        </select>
        <button type="submit">Sign up</button>
    </form>
    <p>Already have an account? <a href="/login">Login</a></p>
    <div id="message" class="msg"></div>
</div>

<script>
    const $ = id => document.getElementById(id);
    $("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      $("message").textContent = "Creating account...";
      try {
        const res = await fetch("/auth/signup", {
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({
            name: $("name").value.trim(),
            email: $("email").value.trim(),
            password: $("password").value,
            role: $("role").value
          })
        });
        if (!res.ok) throw new Error("Signup failed");
        $("message").style.color="green";
        $("message").textContent="Signup successful! Please login.";
      } catch (err) {
        $("message").style.color="crimson";
        $("message").textContent="Signup failed (maybe email already exists).";
      }
    });
</script>
</body>
</html>
